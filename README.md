# DriveM2006
initial for v2: DSP Lib generated by CubeMX automatically

## Intro 
这是一个由CubeMX自动配置DSP库的一个案例

## Attention
### 1.下载库
在CubeMX中下载DSP库有时候需要去登录账户

没关系，在CubeIDE里面下载是不需要登录账号的

### 2.配置CMake
打开CMakeLists_template.txt文件，对以下部分进行取消注释
```
#Uncomment for hardware floating point
add_compile_definitions(ARM_MATH_CM4;ARM_MATH_MATRIX_CHECK;ARM_MATH_ROUNDING)
add_compile_options(-mfloat-abi=hard -mfpu=fpv4-sp-d16)
add_link_options(-mfloat-abi=hard -mfpu=fpv4-sp-d16)
```
之后再去寻找并在下面修改：
```
#这句是自动生成的
add_executable($${PROJECT_NAME}.elf $${SOURCES} $${LINKER_SCRIPT})
#添加的是这句
target_link_libraries(${PROJECT_NAME}.elf ${CMAKE_SOURCE_DIR}/Middlewares/ST/ARM/DSP/Lib/libarm_cortexM4lf_math.a)
```
之后再在Cubemx中点击GENERATE CODE，CMakeLists.txt中会更新刚刚添加在CMakeLists_template.txt中的内容，之后再重新加载Cmake项目即可使用DSP库了

### 3.使用DSP
记得include一下就好了
```
#include "arm_math.h"
```

### 4.测试功能
```
test = arm_sin_f32(30 * PI / 180.f);
```
 
